# Backend Crystal Services

---

## 1. Цель проекта

Целью данного проекта является разработка Backend-части для интернет-магазина реализации фильтров для воды (фирма с единым офисом и собственным складом) в городе Белгород. Сервис должен предоставлять взаимодействие с клиентами, менеджерами склада, а также с курьерами-сантехниками.

## 2. Описание сервиса

Сервис содержит в себе следующие блоки функциональности:

1. Регистрация пользователей, их аутентификация и авторизация
2. Функциональность взаимодействия пользователя с каталогом товаров
3. Функциональность оформления заказа для пользователя
4. Функциональность для менеджера склада:
   - Обработка заказов пользователей (изменение статуса)
   - Получение отчетности о продажах за определенный период
   - Редактирование каталога товаров
   - Создание запросов на поставку нового товара
5. Функциональность для курьеров-сантехников склада
   - Получение новых заявок на доставку (и возможную установку) товара
   - Обработка имеющихся заявок

### 2.1 Типы пользователей

В системе предусмотрено 3 типа пользователей:

1. Клиент
2. Менеджер
3. Курьер

### 2.2 Регистрация и аутентификация

Процесс регистрации новых клиентов должен быть реализован через интерфейсы и API сервиса.
Для регистрации нового пользователя предполагается ввести следующие поля в форму регистрации:

- surname - фамилия нового пользователя
- name - имя нового пользователя
- email - адрес электронной почты пользователя. Данное поле также является уникальным логином для аутентификации пользователя в ИС
- phone_number - номер телефона пользователя (мобильный, начинается с 8)
- password - пароль для пользователя (содержит не менее 8 знаков, должны использоваться как минимум одна строчная, одна прописная латинские буквы и одна цифра).
- role - роль пользователя в системе (представлены в 2.1)

Для аутентификации пользователя в форму регистрации необходимо ввести следующие поля:

- email - адрес электронной почты, указанный при регистрации
- password - пароль, указанный при регистрации
- role - роль пользователя

### 2.3 Просмотр каталога товаров

Для всех пользователей доступен просмотр списка всех товаров, которые доступны на складе. Также будет доступен фильтр по компании, которая производит товары, и диапазону цены.

### 2.4 Функциональность оформления заказа для пользователя

После ознакомления со списком товаров клиент может интересующие его товары добавить в корзину, **если они не заблокированы менеджером**. Для каждого пользователя будет доступна его собственная корзина **в сессионном хранилище**. У пользователя будет возможность проверять содержимое своей корзины (товары, общую стоимость), редактировать ее содержимое.

После того, как пользователь определился с интересующими его товарами, он может оформить заказ. Для заказа возможно два варианта получения товара пользователем:

- Самовывоз. При выборе этого варианта для пользователя предоставляется адрес пункта выдачи в городе для товаров, он оплачивает итоговую стоимость и в указанное после оформления заказа время забрать его сам из этого пункта выдачи.
- Доставка и установка. При выборе данного варианта за дополнительную плату клиента к итоговой стоимости заказа специальная служба доставит товар и установит его в жилом помещении. Для этого клиенту необходимо дополнительно указать адрес доставки.

На первом этапе разработки данного сервиса оплата доступна только в пункте выдаче при самовывозе заказанного товара либо в службе доставки товара.

После этого клиент может просматривать свои активные и завершенные заказы.

### 2.5 Функциональность для менеджера склада

Менеджер в данной системе является ответственным за управление каталогом товаров, обработку пользовательских заказов и создание заявок на поставку партии товара.

#### 2.5.1 Управление каталогом товаров

Менеджер может просматривать список всех товаров на складе, редактировать информацию об определенном товаре и удалять их из базы данных. При этом для менеджера доступна возможность блокирования товара в каталоге (товар будет отображен в каталоге, но возможность добавить его в корзину уже не будет предоставляться клиенту).

#### 2.5.2 Обработка заказов пользователей

Менеджер может просматривать список всех активных заказов от пользователей, а также изменять их статусы (закрывать их) в случае выполнения заказа.

#### 2.5.3 Создание заявок на поставку партии товара

В любое время менеджер может создать заявку для поставки партии определенного товара на склад. Для этого заполняется специальная форма:

- товар, для которого будет заказана поставка
- количество данного товара
- компания-поставщик После этого будет произведен подсчет итоговой стоимости заказа товара у поставщика и вся информация будет предоставлена менеджеру. Если он согласен, то в базе данных создается новая заявка на поставку данного товара, и ее статус указывается как активный. После выполнения поставки менеджер может закрыть ее, изменив статус.

#### 2.5.4 Получение отчетности о продажах

Менеджер склада может получить отчет о продажах товаров за определенный промежуток времени в виде файла формата xlsx.
